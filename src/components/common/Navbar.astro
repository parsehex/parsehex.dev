---
import { Icon } from 'astro-icon/components';
import menuOptions from '../../data/menu-options.json';
// import SearchBoxOrama from './SearchBoxOrama.vue';
import { nonEmptyCollections } from '@/content.config';

const availTypes = nonEmptyCollections;

// I want part of the navbar to be a list of Thing types with content
//   dynamic because of non-empty filter && use amount/recency of content to sort and/or style
// Eventually I expect to start having pages where the page is the content, which I would/will place outside the above list.
---

<nav class="navbar" role="navigation" aria-label="main navigation">
	<div class="navbar-brand mt-4-desktop pt-4 mb-2 ml-2">
		<a class="navbar-item" href='/'>
			<h1 class="is-size-3 is-size-5-mobile tertiary-color f-normal">
				parsehex
			</h1>
		</a>
		<a
			role="button"
			class="navbar-burger"
			aria-label="menu"
			aria-expanded="false"
			data-target="navbar-id"
		>
			<span aria-hidden="true"></span>
			<span aria-hidden="true"></span>
			<span aria-hidden="true"></span>
		</a>
	</div>

	<div id="navbar-id" class="navbar-menu mt-4 mb-2">
		<div class="navbar-end mr-4">
			<a href={'/'} class="navbar-item f-600 tertiary-color ">
				HOME
			</a>
			{
				availTypes.map((option) => {
					return (
						<a href={'/' + option} class="navbar-item f-600 tertiary-color ">
							{option.toUpperCase()}
						</a>
					);
				})
			}
			<div class="mt-4">
				<!-- <SearchBoxOrama client:visible /> -->

				<Icon
					class="ml-4 tertiary-color baseline-dark-mode pointer"
					size={34}
					name="gg:dark-mode"
				/>
			</div>
		</div>
	</div>
</nav>

<script>
	import { setTheme } from '../../utils/theme';

	function openBurger() {
		const $navbarBurgers = Array.prototype.slice.call(
			document.querySelectorAll('.navbar-burger'),
			0,
		);

		$navbarBurgers.forEach((element) => {
			element.addEventListener('click', () => {
				const target = element.dataset.target;
				const $target = document.getElementById(target) as HTMLElement;

				element.classList.toggle('is-active');

				$target!.classList.toggle('is-active');
			});
		});
	}

	document
		.querySelector('.baseline-dark-mode')
		?.addEventListener('click', () => setTheme());

	document.addEventListener('DOMContentLoaded', () => openBurger());
</script>
